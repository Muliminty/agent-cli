
<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>agent-cli - æ™ºèƒ½é¡¹ç›®ç®¡ç†å¹³å°</title>

    <!-- æ ·å¼è¡¨ -->
    <link rel="stylesheet" href="/css/dashboard.css">

    <!-- å›¾æ ‡åº“ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- ä»£ç é«˜äº® -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css">

    <style>
        /* ä¸´æ—¶æ ·å¼ï¼Œç­‰å¾…ç»„ä»¶åŠ è½½ */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            z-index: 9999;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- åŠ è½½å±å¹• -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-spinner"></div>
        <h2>æ­£åœ¨åŠ è½½ agent-cli...</h2>
        <p>åˆå§‹åŒ–åº”ç”¨ç»„ä»¶</p>
    </div>

    <!-- åº”ç”¨å®¹å™¨ -->
    <div class="app-container" id="appContainer" style="display: none;">
        <!-- ä¾§è¾¹æ  -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <span class="sidebar-logo-icon">ğŸš€</span>
                    <span class="sidebar-logo-text">agent-cli</span>
                </div>
                <button class="sidebar-toggle" id="sidebarToggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">ä¸»è¦</div>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="#" class="nav-link active" data-view="dashboard">
                                <span class="nav-icon"><i class="fas fa-tachometer-alt"></i></span>
                                <span class="nav-text">ä»ªè¡¨æ¿</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-view="projects">
                                <span class="nav-icon"><i class="fas fa-folder"></i></span>
                                <span class="nav-text">é¡¹ç›®ç®¡ç†</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-view="wizard">
                                <span class="nav-icon"><i class="fas fa-magic"></i></span>
                                <span class="nav-text">é¡¹ç›®å‘å¯¼</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">å¼€å‘å·¥å…·</div>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-view="chat">
                                <span class="nav-icon"><i class="fas fa-comments"></i></span>
                                <span class="nav-text">AIé—®ç­”</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-view="code">
                                <span class="nav-icon"><i class="fas fa-code"></i></span>
                                <span class="nav-text">ä»£ç ç¼–è¾‘å™¨</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-view="testing">
                                <span class="nav-icon"><i class="fas fa-vial"></i></span>
                                <span class="nav-text">æµ‹è¯•å·¥å…·</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-view="tasks">
                                <span class="nav-icon"><i class="fas fa-tasks"></i></span>
                                <span class="nav-text">ä»»åŠ¡åˆ—è¡¨</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">ç³»ç»Ÿ</div>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-view="settings">
                                <span class="nav-icon"><i class="fas fa-cog"></i></span>
                                <span class="nav-text">è®¾ç½®</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/api/version" class="nav-link" target="_blank">
                                <span class="nav-icon"><i class="fas fa-book"></i></span>
                                <span class="nav-text">APIæ–‡æ¡£</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/health" class="nav-link" target="_blank">
                                <span class="nav-icon"><i class="fas fa-heartbeat"></i></span>
                                <span class="nav-text">å¥åº·æ£€æŸ¥</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="d-flex align-items-center justify-content-between">
                    <button class="btn btn-sm btn-outline" id="themeToggle">
                        <i class="fas fa-moon"></i>
                    </button>
                    <span class="font-sm text-tertiary">v1.0.0</span>
                </div>
            </div>
        </aside>

        <!-- ä¸»å†…å®¹åŒº -->
        <main class="main-content">
            <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
            <header class="topbar">
                <div class="breadcrumb" id="breadcrumb">
                    <span class="breadcrumb-item">ä»ªè¡¨æ¿</span>
                </div>

                <div class="topbar-actions">
                    <button class="btn btn-sm btn-outline" id="refreshBtn">
                        <i class="fas fa-sync-alt"></i>
                        <span>åˆ·æ–°</span>
                    </button>

                    <div class="status-indicator status-info" id="connectionStatus">
                        <span class="status-dot"></span>
                        <span>è¿æ¥ä¸­...</span>
                    </div>

                    <div class="dropdown">
                        <button class="btn btn-sm btn-outline" id="userMenu">
                            <i class="fas fa-user"></i>
                        </button>
                    </div>
                </div>
            </header>

            <!-- å†…å®¹åŒºåŸŸ -->
            <div class="content-wrapper">
                <!-- åŠ¨æ€å†…å®¹åŒºåŸŸ -->
                <div id="contentArea">
                    <!-- ä»ªè¡¨æ¿è§†å›¾ -->
                    <div class="view-content" data-view="dashboard">
                        <div class="page-header">
                            <h1 class="page-title">ä»ªè¡¨æ¿</h1>
                            <p class="page-subtitle">é¡¹ç›®æ¦‚è§ˆå’Œç³»ç»ŸçŠ¶æ€</p>
                        </div>

                        <div class="dashboard-grid">
                            <!-- é¡¹ç›®ç»Ÿè®¡ -->
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">é¡¹ç›®ç»Ÿè®¡</h3>
                                    <span class="card-icon"><i class="fas fa-project-diagram"></i></span>
                                </div>
                                <div class="card-body">
                                    <div class="d-flex justify-content-between mb-3">
                                        <span>æ€»é¡¹ç›®æ•°</span>
                                        <span class="font-bold" id="totalProjects">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-3">
                                        <span>è¿è¡Œä¸­</span>
                                        <span class="font-bold text-success" id="runningProjects">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <span>æœ€è¿‘æ´»åŠ¨</span>
                                        <span class="font-sm text-tertiary" id="lastActivity">-</span>
                                    </div>
                                </div>
                            </div>

                            <!-- ç³»ç»ŸçŠ¶æ€ -->
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">ç³»ç»ŸçŠ¶æ€</h3>
                                    <span class="card-icon"><i class="fas fa-server"></i></span>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <div class="d-flex justify-content-between mb-1">
                                            <span>CPUä½¿ç”¨ç‡</span>
                                            <span id="cpuUsage">0%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill" id="cpuProgress" style="width: 0%"></div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <div class="d-flex justify-content-between mb-1">
                                            <span>å†…å­˜ä½¿ç”¨</span>
                                            <span id="memoryUsage">0 MB</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill" id="memoryProgress" style="width: 0%"></div>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <span>è¿è¡Œæ—¶é—´</span>
                                        <span class="font-sm text-tertiary" id="uptime">-</span>
                                    </div>
                                </div>
                            </div>

                            <!-- å¿«é€Ÿæ“ä½œ -->
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">å¿«é€Ÿæ“ä½œ</h3>
                                    <span class="card-icon"><i class="fas fa-bolt"></i></span>
                                </div>
                                <div class="card-body">
                                    <div class="d-flex flex-column gap-2">
                                        <button class="btn btn-primary" id="createProjectBtn">
                                            <i class="fas fa-plus"></i>
                                            æ–°å»ºé¡¹ç›®
                                        </button>
                                        <button class="btn btn-outline" id="openChatBtn">
                                            <i class="fas fa-comment"></i>
                                            å¼€å§‹å¯¹è¯
                                        </button>
                                        <button class="btn btn-outline" id="runTestsBtn">
                                            <i class="fas fa-play"></i>
                                            è¿è¡Œæµ‹è¯•
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- æœ€è¿‘æ´»åŠ¨ -->
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">æœ€è¿‘æ´»åŠ¨</h3>
                                    <span class="card-icon"><i class="fas fa-history"></i></span>
                                </div>
                                <div class="card-body">
                                    <div class="d-flex flex-column gap-2" id="recentActivities">
                                        <div class="d-flex align-items-center gap-2">
                                            <i class="fas fa-info-circle text-info"></i>
                                            <span class="font-sm">ç³»ç»Ÿæ­£åœ¨åˆå§‹åŒ–...</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- é¡¹ç›®åˆ—è¡¨ -->
                        <div class="mt-5">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h3>æœ€è¿‘é¡¹ç›®</h3>
                                <a href="#" class="btn btn-sm btn-outline" data-view="projects">
                                    æŸ¥çœ‹å…¨éƒ¨
                                </a>
                            </div>

                            <div class="table-container">
                                <table class="table" id="recentProjectsTable">
                                    <thead>
                                        <tr>
                                            <th>é¡¹ç›®åç§°</th>
                                            <th>ç±»å‹</th>
                                            <th>çŠ¶æ€</th>
                                            <th>æœ€åæ›´æ–°</th>
                                            <th>æ“ä½œ</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="5" class="text-center text-tertiary">
                                                åŠ è½½é¡¹ç›®åˆ—è¡¨...
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- ä»»åŠ¡åˆ—è¡¨è§†å›¾ -->
                    <div class="view-content" data-view="tasks" style="display: none;">
                        <div class="page-header">
                            <h1 class="page-title">ä»»åŠ¡åˆ—è¡¨</h1>
                            <p class="page-subtitle">å®æ—¶ç›‘æ§å’Œç®¡ç†åå°ä»»åŠ¡</p>
                        </div>

                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <div class="btn-group">
                                <button class="btn btn-sm btn-outline" id="refreshTasksBtn">
                                    <i class="fas fa-sync-alt"></i>
                                    åˆ·æ–°
                                </button>
                                <button class="btn btn-sm btn-outline" id="clearCompletedTasksBtn">
                                    <i class="fas fa-trash"></i>
                                    æ¸…ç†å·²å®Œæˆ
                                </button>
                            </div>

                            <div class="d-flex align-items-center gap-3">
                                <div class="form-group mb-0">
                                    <label class="form-label mr-2">çŠ¶æ€ç­›é€‰:</label>
                                    <select class="form-select form-select-sm" id="taskStatusFilter">
                                        <option value="all">å…¨éƒ¨ä»»åŠ¡</option>
                                        <option value="pending">ç­‰å¾…ä¸­</option>
                                        <option value="running">è¿è¡Œä¸­</option>
                                        <option value="completed">å·²å®Œæˆ</option>
                                        <option value="failed">å¤±è´¥</option>
                                    </select>
                                </div>
                                <div class="form-group mb-0">
                                    <label class="form-label mr-2">æ’åº:</label>
                                    <select class="form-select form-select-sm" id="taskSort">
                                        <option value="created_desc">æœ€æ–°åˆ›å»º</option>
                                        <option value="created_asc">æœ€æ—©åˆ›å»º</option>
                                        <option value="updated_desc">æœ€è¿‘æ›´æ–°</option>
                                        <option value="priority_desc">ä¼˜å…ˆçº§é™åº</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- ä»»åŠ¡ç»Ÿè®¡ -->
                        <div class="row mb-4" id="taskStats">
                            <div class="col-md-3">
                                <div class="stat-card">
                                    <div class="stat-value" id="totalTasks">0</div>
                                    <div class="stat-label">æ€»ä»»åŠ¡æ•°</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-card">
                                    <div class="stat-value text-primary" id="runningTasks">0</div>
                                    <div class="stat-label">è¿è¡Œä¸­</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-card">
                                    <div class="stat-value text-success" id="completedTasks">0</div>
                                    <div class="stat-label">å·²å®Œæˆ</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-card">
                                    <div class="stat-value text-danger" id="failedTasks">0</div>
                                    <div class="stat-label">å¤±è´¥</div>
                                </div>
                            </div>
                        </div>

                        <!-- ä»»åŠ¡åˆ—è¡¨ -->
                        <div class="table-container">
                            <table class="table" id="tasksTable">
                                <thead>
                                    <tr>
                                        <th width="40">
                                            <input type="checkbox" id="selectAllTasks">
                                        </th>
                                        <th>ä»»åŠ¡åç§°</th>
                                        <th>ç±»å‹</th>
                                        <th>çŠ¶æ€</th>
                                        <th>è¿›åº¦</th>
                                        <th>åˆ›å»ºæ—¶é—´</th>
                                        <th>æ›´æ–°æ—¶é—´</th>
                                        <th>æ“ä½œ</th>
                                    </tr>
                                </thead>
                                <tbody id="tasksTableBody">
                                    <tr>
                                        <td colspan="8" class="text-center text-tertiary">
                                            åŠ è½½ä»»åŠ¡åˆ—è¡¨...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- ä»»åŠ¡è¯¦æƒ…é¢æ¿ -->
                        <div class="task-detail-panel" id="taskDetailPanel" style="display: none;">
                            <div class="panel-header">
                                <h4 class="panel-title">ä»»åŠ¡è¯¦æƒ…</h4>
                                <button class="btn btn-sm btn-outline" id="closeTaskDetail">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="panel-body">
                                <div id="taskDetailContent">
                                    <!-- åŠ¨æ€åŠ è½½ä»»åŠ¡è¯¦æƒ… -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- å…¶ä»–è§†å›¾å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                </div>
            </div>
        </main>
    </div>

    <!-- é€šçŸ¥å®¹å™¨ -->
    <div class="notification-container" id="notificationContainer"></div>

    <!-- è¿æ¥çŠ¶æ€æŒ‡ç¤ºå™¨ -->
    <div class="connection-status disconnected" id="connectionIndicator">
        <i class="fas fa-plug"></i>
        <span>è¿æ¥ä¸­...</span>
    </div>

    <!-- JavaScriptæ–‡ä»¶ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="/js/app.js"></script>
    <script src="/js/api-client.js"></script>
    <script src="/js/project-wizard.js"></script>
    <script src="/js/chat-interface.js"></script>
    <script src="/js/project-manager.js"></script>
    <script src="/js/task-manager.js"></script>
    <script src="/js/realtime-updater.js"></script>
    <script src="/js/error-handler.js"></script>

    <script>
        // åˆå§‹åŒ–UIäº¤äº’
        document.addEventListener('DOMContentLoaded', function() {
            // ä¾§è¾¹æ åˆ‡æ¢
            const sidebarToggle = document.getElementById('sidebarToggle');
            const sidebar = document.getElementById('sidebar');

            sidebarToggle.addEventListener('click', function() {
                sidebar.classList.toggle('collapsed');
            });

            // ä¸»é¢˜åˆ‡æ¢
            const themeToggle = document.getElementById('themeToggle');
            themeToggle.addEventListener('click', function() {
                app.toggleTheme();
            });

            // å¯¼èˆªé“¾æ¥ç‚¹å‡»
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();

                    // ç§»é™¤æ‰€æœ‰activeç±»
                    document.querySelectorAll('.nav-link').forEach(l => {
                        l.classList.remove('active');
                    });

                    // æ·»åŠ activeç±»åˆ°å½“å‰é“¾æ¥
                    this.classList.add('active');

                    // åˆ‡æ¢è§†å›¾
                    const view = this.getAttribute('data-view');
                    if (view) {
                        app.setCurrentView(view);
                    }
                });
            });

            // åˆ·æ–°æŒ‰é’®
            const refreshBtn = document.getElementById('refreshBtn');
            refreshBtn.addEventListener('click', function() {
                app.emit('refreshData');
            });

            // å¿«é€Ÿæ“ä½œæŒ‰é’®
            document.getElementById('createProjectBtn').addEventListener('click', function() {
                app.setCurrentView('wizard');
            });

            document.getElementById('openChatBtn').addEventListener('click', function() {
                app.setCurrentView('chat');
            });

            document.getElementById('runTestsBtn').addEventListener('click', function() {
                app.addNotification({
                    type: 'info',
                    title: 'æµ‹è¯•è¿è¡Œ',
                    message: 'æ­£åœ¨å‡†å¤‡è¿è¡Œæµ‹è¯•...'
                });
            });

            // ç›‘å¬åº”ç”¨äº‹ä»¶
            app.on('websocketConnected', function() {
                const indicator = document.getElementById('connectionIndicator');
                indicator.className = 'connection-status connected';
                indicator.innerHTML = '<i class="fas fa-plug"></i><span>å·²è¿æ¥</span>';
            });

            app.on('websocketDisconnected', function() {
                const indicator = document.getElementById('connectionIndicator');
                indicator.className = 'connection-status disconnected';
                indicator.innerHTML = '<i class="fas fa-plug"></i><span>å·²æ–­å¼€</span>';
            });

            app.on('viewChanged', function(view) {
                // æ›´æ–°é¢åŒ…å±‘
                const breadcrumb = document.getElementById('breadcrumb');
                let breadcrumbText = '';

                switch(view) {
                    case 'dashboard':
                        breadcrumbText = 'ä»ªè¡¨æ¿';
                        break;
                    case 'projects':
                        breadcrumbText = 'é¡¹ç›®ç®¡ç†';
                        break;
                    case 'wizard':
                        breadcrumbText = 'é¡¹ç›®å‘å¯¼';
                        break;
                    case 'chat':
                        breadcrumbText = 'AIé—®ç­”';
                        break;
                    case 'tasks':
                        breadcrumbText = 'ä»»åŠ¡åˆ—è¡¨';
                        break;
                    case 'settings':
                        breadcrumbText = 'è®¾ç½®';
                        break;
                    default:
                        breadcrumbText = view;
                }

                breadcrumb.innerHTML = `<span class="breadcrumb-item">${breadcrumbText}</span>`;

                // æ›´æ–°å¯¼èˆªé“¾æ¥
                document.querySelectorAll('.nav-link').forEach(link => {
                    if (link.getAttribute('data-view') === view) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });

                // åŠ è½½è§†å›¾å†…å®¹
                loadViewContent(view);
            });

            // éšè—åŠ è½½å±å¹•
            setTimeout(() => {
                document.getElementById('loadingScreen').style.display = 'none';
                document.getElementById('appContainer').style.display = 'flex';
            }, 1000);

            // åˆå§‹åŒ–ä»£ç é«˜äº®
            hljs.highlightAll();
        });

        // åŠ è½½è§†å›¾å†…å®¹
        function loadViewContent(view) {
            const contentArea = document.getElementById('contentArea');

            // è¿™é‡Œåº”è¯¥æ ¹æ®è§†å›¾åŠ¨æ€åŠ è½½å†…å®¹
            // æš‚æ—¶åªæ˜¾ç¤ºé»˜è®¤å†…å®¹
            document.querySelectorAll('.view-content').forEach(el => {
                el.style.display = 'none';
            });

            const viewEl = document.querySelector(`[data-view="${view}"]`);
            if (viewEl) {
                viewEl.style.display = 'block';
            }

            // è§¦å‘è§†å›¾åŠ è½½äº‹ä»¶
            app.emit('viewLoaded', view);
        }

        // å·¥å…·å‡½æ•°ï¼šæ›´æ–°æœ€è¿‘æ´»åŠ¨
        function updateRecentActivity(activity) {
            const container = document.getElementById('recentActivities');
            const activityEl = document.createElement('div');
            activityEl.className = 'd-flex align-items-center gap-2';

            let icon = 'fa-info-circle';
            let color = 'text-info';

            switch(activity.type) {
                case 'success':
                    icon = 'fa-check-circle';
                    color = 'text-success';
                    break;
                case 'error':
                    icon = 'fa-exclamation-circle';
                    color = 'text-danger';
                    break;
                case 'warning':
                    icon = 'fa-exclamation-triangle';
                    color = 'text-warning';
                    break;
            }

            activityEl.innerHTML = `
                <i class="fas ${icon} ${color}"></i>
                <span class="font-sm">${activity.message}</span>
                <span class="font-sm text-tertiary ml-auto">${formatTime(activity.timestamp)}</span>
            `;

            container.insertBefore(activityEl, container.firstChild);

            // é™åˆ¶æœ€å¤šæ˜¾ç¤º5æ¡
            if (container.children.length > 5) {
                container.removeChild(container.lastChild);
            }
        }

        // å·¥å…·å‡½æ•°ï¼šæ ¼å¼åŒ–æ—¶é—´
        function formatTime(timestamp) {
            const now = Date.now();
            const diff = now - timestamp;

            if (diff < 60000) { // 1åˆ†é’Ÿå†…
                return 'åˆšåˆš';
            } else if (diff < 3600000) { // 1å°æ—¶å†…
                return Math.floor(diff / 60000) + 'åˆ†é’Ÿå‰';
            } else if (diff < 86400000) { // 1å¤©å†…
                return Math.floor(diff / 3600000) + 'å°æ—¶å‰';
            } else {
                return Math.floor(diff / 86400000) + 'å¤©å‰';
            }
        }

        // ç›‘å¬é€šçŸ¥äº‹ä»¶
        app.on('notificationAdded', function(notification) {
            const container = document.getElementById('notificationContainer');
            const notificationEl = document.createElement('div');
            notificationEl.className = `notification notification-${notification.type}`;
            notificationEl.id = `notification-${notification.id}`;

            let icon = 'fa-info-circle';
            switch(notification.type) {
                case 'success':
                    icon = 'fa-check-circle';
                    break;
                case 'error':
                    icon = 'fa-exclamation-circle';
                    break;
                case 'warning':
                    icon = 'fa-exclamation-triangle';
                    break;
            }

            notificationEl.innerHTML = `
                <div class="notification-icon">
                    <i class="fas ${icon}"></i>
                </div>
                <div class="notification-content">
                    <div class="notification-title">${notification.title}</div>
                    <div class="notification-message">${notification.message}</div>
                </div>
                <button class="notification-close" onclick="app.removeNotification('${notification.id}')">
                    <i class="fas fa-times"></i>
                </button>
            `;

            container.appendChild(notificationEl);

            // è‡ªåŠ¨ç§»é™¤
            if (notification.duration > 0) {
                setTimeout(() => {
                    const el = document.getElementById(`notification-${notification.id}`);
                    if (el) {
                        el.style.animation = 'slideIn 0.3s ease reverse';
                        setTimeout(() => el.remove(), 300);
                    }
                }, notification.duration);
            }
        });

        app.on('notificationRemoved', function(notification) {
            const el = document.getElementById(`notification-${notification.id}`);
            if (el) {
                el.style.animation = 'slideIn 0.3s ease reverse';
                setTimeout(() => el.remove(), 300);
            }
        });

        // æ¨¡æ‹Ÿç³»ç»ŸçŠ¶æ€æ›´æ–°
        function updateSystemStatus() {
            // æ¨¡æ‹ŸCPUä½¿ç”¨ç‡
            const cpuUsage = Math.floor(Math.random() * 30) + 10;
            document.getElementById('cpuUsage').textContent = cpuUsage + '%';
            document.getElementById('cpuProgress').style.width = cpuUsage + '%';

            // æ¨¡æ‹Ÿå†…å­˜ä½¿ç”¨
            const memoryUsage = Math.floor(Math.random() * 1024) + 512;
            document.getElementById('memoryUsage').textContent = memoryUsage + ' MB';
            document.getElementById('memoryProgress').style.width = Math.min(100, (memoryUsage / 2048) * 100) + '%';

            // æ¨¡æ‹Ÿè¿è¡Œæ—¶é—´
            const uptime = Math.floor(Math.random() * 86400) + 3600;
            const hours = Math.floor(uptime / 3600);
            const minutes = Math.floor((uptime % 3600) / 60);
            document.getElementById('uptime').textContent = `${hours}å°æ—¶${minutes}åˆ†é’Ÿ`;

            // æ¨¡æ‹Ÿæœ€è¿‘æ´»åŠ¨
            const activities = [
                'é¡¹ç›® "my-app" åˆ›å»ºæˆåŠŸ',
                'AIé—®ç­”ä¼šè¯å¼€å§‹',
                'ç³»ç»Ÿæ£€æŸ¥å®Œæˆ',
                'WebSocketè¿æ¥å·²å»ºç«‹',
                'é…ç½®æ–‡ä»¶å·²æ›´æ–°'
            ];

            const randomActivity = activities[Math.floor(Math.random() * activities.length)];
            updateRecentActivity({
                type: ['info', 'success', 'warning'][Math.floor(Math.random() * 3)],
                message: randomActivity,
                timestamp: Date.now() - Math.floor(Math.random() * 3600000)
            });
        }

        // å®šæœŸæ›´æ–°ç³»ç»ŸçŠ¶æ€
        setInterval(updateSystemStatus, 5000);
        updateSystemStatus(); // åˆå§‹æ›´æ–°
    </script>
</body>
</html>
  