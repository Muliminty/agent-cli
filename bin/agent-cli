#!/usr/bin/env node

/**
 * é•¿æ•ˆè¿è¡Œæ™ºèƒ½ä½“CLIå·¥å…· - å…¥å£æ–‡ä»¶
 * è®¾è®¡æ€è·¯ï¼šä½œä¸ºå¯æ‰§è¡Œæ–‡ä»¶å…¥å£ï¼ŒåŠ è½½ç¼–è¯‘åçš„ä¸»æ¨¡å—
 *
 * æ³¨æ„äº‹é¡¹ï¼š
 * 1. éœ€è¦æ–‡ä»¶å¯æ‰§è¡Œæƒé™: chmod +x bin/agent-cli
 * 2. ä½¿ç”¨ESMæ¨¡å—ç³»ç»Ÿï¼Œä¸tsconfigé…ç½®ä¸€è‡´
 * 3. é”™è¯¯å¤„ç†ç¡®ä¿å‹å¥½çš„ç”¨æˆ·åé¦ˆ
 */

import { main } from '../dist/cli/index.js'

// é”™è¯¯å¤„ç†åŒ…è£…
async function run() {
  try {
    await main()
  } catch (error) {
    console.error('âŒ CLIæ‰§è¡Œé”™è¯¯:')

    if (error instanceof Error) {
      console.error(`   æ¶ˆæ¯: ${error.message}`)

      // æä¾›è°ƒè¯•ä¿¡æ¯
      if (process.env.DEBUG === 'true') {
        console.error('\nğŸ” è¯¦ç»†å †æ ˆ:')
        console.error(error.stack)
      } else {
        console.error('   æç¤º: è®¾ç½® DEBUG=true æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯')
      }
    } else {
      console.error(`   æœªçŸ¥é”™è¯¯: ${error}`)
    }

    console.error('\nğŸ’¡ å°è¯•è¿è¡Œ: agent-cli --help æŸ¥çœ‹ä½¿ç”¨è¯´æ˜')
    process.exit(1)
  }
}

// æ‰§è¡Œä¸»å‡½æ•°
run()